# Spring SNS Project 
ìŠ¤í”„ë§ + JSP SNSí”„ë¡œì íŠ¸
<a href="3.39.125.101:8080">ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</a>

## ğŸ–¥ í”„ë¡œì íŠ¸ ì†Œê°œ
SNSí˜•ì‹ì˜ ê²Œì‹œíŒ ì…ë‹ˆë‹¤. 
## â² ê°œë°œê¸°ê°„
* 2022.10.28 ~ 2022.11.11 (ì´í›„ ìƒê°ë‚˜ëŠ” ê¸°ëŠ¥ ì²œì²œíˆ ì¶”ê°€í•˜ëŠ” ì¤‘)
### âš™ ê°œë°œí™˜ê²½
- `Java8`
- `JDK 1.8.0`
- **IDE** : Eclipse
- **Framework** : Spring 5.2.5
- **Database** : Mysql 8.0.31
- **ORM** : Mybatis
### ê°œë°œí•˜ë©´ì„œ ì–´ë ¤ì› ë˜ ì ê³¼ í•´ê²°í•œ ë°©ë²•
1. ê²Œì‹œê¸€ ë“±ë¡ì‹œ ì´ë¯¸ì§€ ë“±ë¡ </br>-> 1ê°œë§Œ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ”ê²ƒì„ ìƒê°í•˜ë˜ ì¤‘ ì—¬ëŸ¬ê°œ ì˜¬ë¦¬ëŠ”ê²Œ ë” ì˜ì–´ìš¸ë¦¬ì§€ ì•Šì„ê¹Œ? ë¼ëŠ” ìƒê°ì„ í•˜ê²Œ ë¨ </br>-> ë‹¨ì¼ íŒŒì¼ë§Œ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ ë¦¬ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•´ ì—¬ëŸ¬ íŒŒì¼ì„ ê°€ì ¸ì˜¤ë„ë¡  ë°”ê¿ˆ </br>-> ë·°ì—ì„œ ì—…ë¡œë“œí•œ ì‚¬ì§„ì„ ë¯¸ë¦¬ë³´ê¸°í•˜ê³  í´ë¦­ì‹œ ì—…ë¡œë“œ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì‚­ì œë˜ëŠ”ê±¸ ë§Œë“¤ê³  ì‹¶ì—ˆìœ¼ë‚˜ ë¯¸ë¦¬ë³´ê¸°ì—ì„  ì‚­ì œë˜ì§€ë§Œ ì‹¤ì œ ë¦¬ìŠ¤íŠ¸ì—ì„  ì œëŒ€ë¡œ ì§€ì›Œì§€ì§€ ì•ŠìŒ </br>-> jsì˜ ë¦¬ë”ë¥¼ ì‚¬ìš©í•œ íŒŒì¼ ë¦¬ìŠ¤íŠ¸ë¡œ ìˆ˜ì • ì„±ê³µ
2. ì¢‹ì•„ìš” ì•„ì´ì½˜ ì¶œë ¥ì´ ì´ìƒí•˜ê²Œ ë¨
   </br>-> ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë„˜ê²¨ì£¼ëŠ” ëª¨ë¸ì´ dtoì—¬ì„œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìê°€ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥¸ ê²Œì‹œê¸€ ëª©ë¡ì„ ì œëŒ€ë¡œ ëª»ë½‘ì•„ì˜´
   </br>-> ë§¤í¼ì—ì„œ ë°˜í™˜í•´ì£¼ëŠ” ê°’ì„ dtoì—ì„œ intë¡œ ë°”ê¿” í•´ë‹¹ ì‚¬ìš©ìê°€ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥¸ ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ë§Œ ì „ë‹¬í•´ì„œ í•´ê²°
3. ë¡œì»¬í™˜ê²½ì—ì„œ Awsë°°í¬ë¡œ ì˜®ê¸´ í›„ ì‹œê°„ ì¶œë ¥ì´ ì„¸ê³„í‘œì¤€ì‹œê°„ìœ¼ë¡œ ì¶œë ¥ë¨ </br>-> í†°ìº£ ì„œë²„ì‹œê°„ ë¬¸ì œì¸ ì¤„ ì•Œê³  í†°ìº£ ì„œë²„ì‹œê°„ì„ ë°”ê¿¨ìœ¼ë‚˜ ê³ ì³ì§€ì§€ ì•ŠìŒ </br>-> ì‹œê°„ ì €ì¥ì„ dbì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ë˜ëŠ”ê±¸ ë’¤ëŠ¦ê²Œ ì•Œê³  dbì˜ íƒ€ì„ì¡´ ìˆ˜ì •
## ğŸ“Œ ì£¼ìš” ê¸°ëŠ¥
#### íšŒì›ê°€ì…
* íšŒì›ê°€ì…ì‹œ ì…ë ¥í•œ ì•„ì´ë””ê°€ ì´ë¯¸ ê°€ì…ëœ ì•„ì´ë””ì¸ì§€ í™•ì¸ì„ í•˜ê³  ê°€ì…ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™” í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥
<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
	@PostMapping(value="/idChk")
	public @ResponseBody  int idCheck(String user_id) {
		// íšŒì›ê°€ì…ì‹œ ì•„ì´ë”” ì¤‘ë³µ ì²´í¬
		int result = this.userService.checkJoin(user_id);
		return result;
	}
```

```
<select id="check_join" parameterType="string" resultType="int">
	<![CDATA[
		select count(*) from user where user_id = #{user_id}
	]]>
</select>
```
```JAVA
 	public String createUser(UserDTO dto) {
		PasswordEncoder p = new BCryptPasswordEncoder();
		dto.setUser_pw(p.encode(dto.getUser_pw()));		
		
		int affectRowCount = this.userDao.userInsert(dto);
		if(affectRowCount == 1) {
			return dto.getUser_id();
		}
		return null;
	}
```
```javascript
$('#idChk').click(function() {
        		let user_id = $('#user_id').val().trim();
        		
        		if(user_id == '') {
        			alert('ì•„ì´ë””ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”')
        		}else {
    	    		$.ajax({
    	    			url : "/idChk",
    	    			type : "post",
    	    			dataType : 'json',
    	    			data : {user_id : user_id},
    	    			success : function(result) {
    	    				if(result == 1) {
    	    					$('.submit').attr('disabled', true);
    	    					alert('ì´ë¯¸ ì‚¬ìš©ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.');
    	    				} else {
    							$('#user_id').attr('readonly', true);
    							$('#idChk').attr('disabled', true);
    							$('#idChk').css('background-color', '#e3e3e3');
    							flag_id = true
    							if(flag_id == true && flag_pw == true) {
    			    				$('.submit').removeAttr('style');
    			    				$('.submit').removeAttr('disabled');    					
    		    				}
    	    					alert('ì‚¬ìš© ê°€ëŠ¥í•œ ì•„ì´ë”” ì…ë‹ˆë‹¤.');
    	    				}
    	    			},
    	    			error : function() {
    	    				alert('ì„œë²„ ìš”ì²­ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
    	    			}
    	    		})
        		}
        	})
```
</details>

#### ë¡œê·¸ì¸
* ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë¼ ìˆëŠ” ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ë¡œê·¸ì¸ ì‹œ ì…ë ¥ë°›ì€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¹„êµí•˜ì—¬ ë§¡ë‹¤ë©´ ë¡œê·¸ì¸ì— ì„±ê³µ

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
	@PostMapping(value="/login")
	public String loginPost(@ModelAttribute LoginDTO dto, HttpServletRequest request, RedirectAttributes rttr) {
		// ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”ë¥¼ ìœ„í•´ ì¸ì½”ë” ê°ì²´ ìƒì„±
		PasswordEncoder p = new BCryptPasswordEncoder();
		
		// ë¡œê·¸ì¸ ì„±ê³µ í›„ ì„¸ì…˜ì— ì•„ì´ë””ë¥¼ ì €ì¥í•´ë‘ê¸° ìœ„í•´ ë§Œë“¬
		HttpSession session = request.getSession();
		
		// DBì— ì €ì¥ë¼ìˆëŠ” í•´ë‹¹ ìœ ì €ì˜ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸
		String userDBPassword = this.userService.login(dto);
		// ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ì™€ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë¹„êµí•´ì„œ ë¹„ë°€ë²ˆí˜¸ê°€ ë§ìœ¼ë©´
		if(p.matches(dto.getUser_pw(), userDBPassword)) {
			// ì„¸ì…˜ì— ìœ ì €ì˜ ì•„ì´ë””ë¥¼ ì €ì¥í•˜ê³  ë©”ì¸í™”ë©´ìœ¼ë¡œ
			session.setAttribute("user_id", dto.getUser_id());
			return "redirect:/";
		} else {
			// ì‹¤íŒ¨í•˜ë©´ ë©”ì‹œì§€ì— falseë¥¼ ì €ì¥í•˜ê³  ë‹¤ì‹œ ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ
			// addFlashAttribute = ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì‚¬ë¼ì§€ëŠ” ì •ë³´
			rttr.addFlashAttribute("message", false);
			session.setAttribute("user_id", null);
			
			return "redirect:login";
		}
		
	}
```
</details>

#### ê²Œì‹œê¸€ ì‘ì„±
* ê²Œì‹œê¸€ ë‚´ìš©ê³¼ ì‚¬ì§„ì„ ìµœëŒ€ 10ì¥ê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥
<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
@PostMapping(value="/new_feed")
	public String newFeedPost(FeedDTO dto, HttpServletRequest req, MultipartHttpServletRequest mhsq, RedirectAttributes rttr) throws IllegalStateException, IOException {
		//HttpSession session = req.getSession();
		
		// ì œì¼ ë§ˆì§€ë§‰ ê²Œì‹œê¸€ì˜ ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ ê°€ì ¸ì˜´
		Integer feed_id = feedService.getFeedMax();
		
		// ê²Œì‹œê¸€ì´ ì—†ì„ ê²½ìš° ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ 0ìœ¼ë¡œ
		if(feed_id == null) {
			feed_id = 0;
		}
		
		int affectRowCount = feedService.newFeed(dto);
		// ê²Œì‹œê¸€ ë‚´ìš© ì €ì¥ì— ì„±ê³µí•˜ë©´
		if(affectRowCount == 1) {
			// ì‚¬ì§„ ì €ì¥ ê²½ë¡œ
			String realFolder = req.getSession().getServletContext().getRealPath("/") + "resources/uploadImg/";
			File dir = new File(realFolder);
			// í´ë”ê°€ ì—†ìœ¼ë©´ ìƒì„±
			if(!dir.isDirectory()) {
				dir.mkdirs();
			}
			
			// ë·°ì—ì„œ ë„˜ê²¨ë°›ì€ ì‚¬ì§„ íŒŒì¼ë“¤
			List<MultipartFile> mf = mhsq.getFiles("uploadFile");
			if(mf.size() == 1 && mf.get(0).getOriginalFilename().equals("")) {
			} else {
				for(int i = 0; i < mf.size(); i++) {
					// ì—…ë¡œë“œ ì´ë¯¸ì§€ì˜ ì´ë¦„ ì¤‘ë³µì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ëœë¤í•œ ë¬¸ìì—´ì„ ìƒì„±í•´ì„œ ì¶”ê°€
					String genId = UUID.randomUUID().toString();
					String originalFileName = mf.get(i).getOriginalFilename();
					
					String saveFileName = genId + "." + FilenameUtils.getExtension(originalFileName);
					
					String savePath = realFolder + saveFileName;
					long fileSize = mf.get(i).getSize();
					
					mf.get(i).transferTo(new File(savePath));
					
					// ì„œë²„ì— ì €ì¥ëœ ì´ë¯¸ì§€ì˜ ì´ë¦„ì„ ë””ë¹„ì— ì €ì¥
					feedService.fileUpload(originalFileName, saveFileName, fileSize, feed_id + 1);
				}
			}
			return "redirect:/";
		} else {
			rttr.addFlashAttribute("message", false);
			return "redirect:new_feed";
		}
		
	}
	
```
</details>

#### ê²Œì‹œê¸€ ìˆ˜ì •
* ì‘ì„±í–ˆë˜ ê²Œì‹œê¸€ì˜ ë‚´ìš©ë§Œ ìˆ˜ì • (ì´ë¯¸ì§€ ìˆ˜ì • ì¶”ê°€ ì˜ˆì •)

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
@GetMapping(value="modify_feed")
	public ModelAndView modifyFeedGet(@RequestParam String feed_id) {
		// ìˆ˜ì •í•˜ë ¤ëŠ” ê²Œì‹œê¸€ì˜ ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ í†µí•´ DBì—ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì˜´
		FeedDTO dto = feedService.getFeedById(feed_id);
		ModelAndView mav = new ModelAndView();
		
		// ê°€ì ¸ì˜¨ ì •ë³´ë¥¼ ëª¨ë¸ë¡œ ë·°ì— ë„˜ê²¨ì„œ í™”ë©´ì— ì¶œë ¥
		mav.addObject("data", dto);
		mav.setViewName("/board/modifyFeed");
		
		return mav;
	}
	
	@PostMapping(value="/modify_feed")
	public String modifyFeedPost(@RequestParam String feed_id) {
		// ìˆ˜ì •í•˜ë ¤ëŠ” ê²Œì‹œê¸€ì˜ ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬
		return "redirect:/modify_feed?feed_id=" + feed_id;
	}
	
	@PostMapping(value="modify_feed_execute")
	public String modifyFeedExecute(@RequestParam Map<String, Object> map) {
		// ê²Œì‹œê¸€ ìˆ˜ì • ì§„í–‰
		feedService.modifyFeed(map);
		
		return "redirect:/";
	}
	
```
</details>

#### ê²Œì‹œê¸€ ì‚­ì œ
* ì‘ì„±í•œ ê²Œì‹œê¸€ ì‚­ì œ

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
	@PostMapping(value="/delete_feed")
	public String deleteFeed(@RequestParam String feed_id, HttpServletRequest req) {
		// ê²Œì‹œê¸€ê³¼ ì„œë²„ì— ì˜¬ë¼ì™€ ìˆëŠ” í•´ë‹¹ ê²Œì‹œê¸€ì— ëŒ€í•œ ì‚¬ì§„ì„ í•¨ê»˜ ì§€ìš°ê¸° ìœ„í•´ í´ë” ê²½ë¡œë¥¼ ë³€ìˆ˜ë¡œ ì„¤ì •
		String realFolder = req.getSession().getServletContext().getRealPath("/") + "/resources/uploadImg/";
		
		// ê²Œì‹œê¸€ì˜ ì‚¬ì§„ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ DBì—ì„œ ê°€ì ¸ì˜´ 
		List<UploadFileDTO> feedUploadFileList = feedService.getFeedUploadFile(feed_id);
		
		// ì„œë²„ì— íŒŒì¼ì´ë¦„ì´ ì¡´ì¬í•œë‹¤ë©´ ì‚­ì œ
		for (UploadFileDTO uploadFileDTO : feedUploadFileList) {
			File file = new File(realFolder + uploadFileDTO.getFile_name());
			if(file.exists()) {
				file.delete();
			}
		}
		
		// ê²Œì‹œê¸€ ë‚´ìš© ì‚­ì œ
		feedService.deleteFeed(feed_id);
		return "redirect:/";
	} 
```
</details>

#### ëŒ“ê¸€ ì‘ì„±
* ê²Œì‹œê¸€ì— ëŒ€í•œ ëŒ“ê¸€ ì‘ì„±

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
	@PostMapping(value="/new_comment")
	public String newComment(CommentDTO comment) {
		// ëŒ“ê¸€ ì‘ì„±
		feedService.newComment(comment);
		
		return "redirect:/";
	}
```
```
<insert id="new_feed" parameterType="com.project.sns.dto.FeedDTO" useGeneratedKeys="true" keyProperty="feed_id">
	<![CDATA[{ call new_feed(
		#{feed_content},
		#{feed_user_id}
		)}
	]]>
</insert>
```
</details>

#### ëŒ“ê¸€ ì‚­ì œ
* ëŒ“ê¸€ì„ ì‘ì„±í•œ ìœ ì €ë§Œ ì‚­ì œ ê°€ëŠ¥

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
	@PostMapping(value="/delete_comment")
	public String deleteComment(@RequestParam Map<String, Object> map) {
		// ëŒ“ê¸€ ë²ˆí˜¸ë¥¼ ê°€ì ¸ì™€ ëŒ“ê¸€ ì‚­ì œ
		feedService.deleteComment(map);
		
		return "redirect:/";
	}
```
```
<c:if test="${user_id eq comment.comment_user_id }">
    <form action="/delete_comment" method="post" id="comment_form" class="col-1 row text-center">
        <input type="hidden" name="comment_feed_id" value="${feed.feed_id }" />
        <input type="hidden" name="comment_id" value="${comment.comment_id }" />
        // ëŒ“ê¸€ ì‚­ì œ ë²„íŠ¼
        <button class="delete-btn fa-solid fa-eraser fa-sm" type="submit"></button>
    </form>
</c:if>
```
</details>

#### ì¢‹ì•„ìš”
* ë¹„ì–´ìˆëŠ” í•˜íŠ¸ë²„íŠ¼ í´ë¦­ì‹œ ì¢‹ì•„ìš”, ê°€ë“ì°¬ í•˜íŠ¸ë²„íŠ¼ í´ë¦­ì‹œ ì¢‹ì•„ìš” ì·¨ì†Œ

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
@ResponseBody
	@GetMapping(value="/like")
	public FeedDTO like(@RequestParam String num, HttpServletRequest req) {
		// ì¢‹ì•„ìš” í´ë¦­
		HttpSession session = req.getSession();
		LikeDTO likeDTO = new LikeDTO();
		// LikeDTOì— ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥¸ ìœ ì €ì˜ ì•„ì´ë””ì™€ ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ ì €ì¥
		likeDTO.setLike_feed_id(Integer.parseInt(num));
		likeDTO.setLike_user_id(session.getAttribute("user_id").toString());
		
		// ê²Œì‹œê¸€ì˜ ì¢‹ì•„ìš” ìˆ˜ë¥¼ 1 ì¦ê°€ì‹œí‚¤ê³  ì¢‹ì•„ìš” ìˆ˜ê°€ ì¦ê°€í•œ ê²Œì‹œê¸‡ì˜ ì •ë³´ë¥¼ AJAXìš”ì²­ì˜ ê²°ê³¼ë¡œ ë°˜í™˜
		FeedDTO result = feedService.likeUp(likeDTO);
		
		return result;
	}
	
	@ResponseBody
	@GetMapping(value="/like_cancel")
	public FeedDTO likeCancel(@RequestParam String num, HttpServletRequest req) {
		// ì¢‹ì•„ìš” ì·¨ì†Œ
		HttpSession session = req.getSession();
		LikeDTO likeDTO = new LikeDTO();
		//LikeDTODP ì¢‹ì•„ìš” ì·¨ì†Œë¥¼ í•œ ìœ ì €ì˜ ì•„ì´ë””ì™€ ê²Œì‹œê¸€ ë²ˆí˜¸ë¥¼ ì €ì¥
		likeDTO.setLike_feed_id(Integer.parseInt(num));
		likeDTO.setLike_user_id(session.getAttribute("user_id").toString());
		
		// ê²Œì‹œê¸€ì˜ ì¢‹ì•„ìš” ìˆ˜ë¥¼ 1 ê°ì†Œì‹œí‚¤ê³  ì¢‹ì•„ìš” ìˆ˜ê°€ ê°ì†Œí•œ ê²Œì‹œê¸€ì˜ ì •ë³´ë¥¼ AJAXìš”ì²­ì˜ ê²°ê³¼ë¡œ ë°˜í™˜
		FeedDTO result = feedService.likeCancel(likeDTO);
		
		return result;
	}
```
```
$(".like").click(function() {
			let num = $(this).attr('idx');
			console.log('like click');
			
			
			if(num == null) {
				return
			} else if($(this).attr('class') == 'like fa-regular fa-heart') {
				$.ajax({
					url : 'like',
					type : 'get',
					data : {
						num : num
					},
					success : function(result) {
						let like = result.feed_like_count;
						$('#like'+num).text(like);
					},
					error : function() {
						alert('ì„œë²„ ì—ëŸ¬')
					}
				})
				$(this).attr('class', 'like fa-solid fa-heart')
			} else if($(this).attr('class') == 'like fa-solid fa-heart') {
				$.ajax({
					url : 'like_cancel',
					type : 'get',
					data : {
						num : num,
					},
					success : function(result) {
						let like = result.feed_like_count;
						$('#like'+num).text(like);
					},
					error : function() {
						alert('ì„œë²„ ì—ëŸ¬');
					}
				})
				$(this).attr('class', 'like fa-regular fa-heart')
			}
		})
```
</details>

#### í”„ë¡œí•„ ìˆ˜ì •
* íšŒì›ê°€ì…ì‹œ ì…ë ¥í–ˆë˜ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ í”„ë¡œí•„ ì‚¬ì§„ì„ ìˆ˜ì • (í”„ë¡œí•„ ì‚¬ì§„ ì‚­ì œ ì¶”ê°€ ì˜ˆì •)

<details>
<summary>ì½”ë“œ ë³´ê¸°</summary>

```java
@PostMapping(value="/user_modify")
	public String userModifyPost(@ModelAttribute UserDTO dto, MultipartHttpServletRequest file ,HttpServletRequest req, RedirectAttributes rttr) {
		// ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ DBì˜ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ë¹„êµí•˜ê¸° ìœ„í•´ ê°ì²´ ìƒì„±
		PasswordEncoder p = new BCryptPasswordEncoder();
		String myDBPw = this.userService.checkPw(dto);
		
		// ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ê°€ ì•”í˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
		boolean checkPw = p.matches(dto.getUser_pw(), myDBPw);
		
		if(checkPw == true) {
			// ìœ ì €ì˜ ìˆ˜ì •ëœ ì •ë³´ë¥¼ ì €ì¥
			this.userService.modifyUser(dto);
			
			// í”„ë¡œí•„ ì‚¬ì§„ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ê²½ë¡œë¥¼ ë³€ìˆ˜ì— ì €ì¥
			String realFolder = req.getSession().getServletContext().getRealPath("/") + "/resources/uploadImg/profileImg/";
			File dir = new File(realFolder);
			// í•´ë‹¹ í´ë”ê°€ ì—†ìœ¼ë©´ í´ë”ë¥¼ ìƒì„±
			if(!dir.isDirectory()) {
				dir.mkdirs();
			}
			
			// ì—…ë¡œë“œí•œ í”„ë¡œí•„ ì‚¬ì§„
			MultipartFile mf = file.getFile("uploadProfile");
			
			// ì‚¬ì§„ ì´ë¦„ì˜ ì¤‘ë³µì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ëœë¤í•œ ë¬¸ìì—´ ìƒì„±í›„ ë¶™ì—¬ì„œ ì‚¬ì§„ì´ë¦„ì„ ì €ì¥
			String genId = UUID.randomUUID().toString();
			String originalFileName = mf.getOriginalFilename();
			// í”„ë¡œí•„ ì‚¬ì§„ì„ ë³€ê²½í–ˆë‹¤ë©´
			if(!originalFileName.isEmpty()) {
				String saveFileName = genId + "." + FilenameUtils.getExtension(originalFileName);
				String savePath = realFolder + saveFileName;
				
				try {
					// ì„œë²„ì— í”„ë¡œí•„ ì‚¬ì§„ì„ ì €ì¥
					mf.transferTo(new File(savePath));
				} catch (IllegalStateException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				} catch (IOException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				
				// ì„œë²„ì— ì €ì¥ëœ í”„ë¡œí•„ ì‚¬ì§„ ì´ë¦„ì„ DBì— ì €ì¥
				this.userService.updateProfile(originalFileName, saveFileName, dto.getUser_id());
			}
			
			
			return "redirect:/user_detail?user_id=" + dto.getUser_id();
		} else {
			rttr.addFlashAttribute("chkPwMsg", false);
			
			return "redirect:/user_modify?user_id=" + dto.getUser_id();
		}
		
		
	}
```

</details>
